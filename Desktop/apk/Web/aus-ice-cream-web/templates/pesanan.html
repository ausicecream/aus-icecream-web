{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
    <h1 class="text-2xl font-bold text-pink-600 mb-6 text-center">Tambah Pesanan Baru</h1>

    <form method="POST" class="space-y-4">
        <div>
            <label class="block text-gray-700">Nama Pelanggan</label>
            <input type="text" name="nama" required class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">No Telefon</label>
            <input type="text" name="tel_no" required class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">Tarikh Event</label>
            <input type="date" name="tarikh" required class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">Alamat Event</label>
            <textarea name="alamat" required class="w-full p-2 border rounded" rows="3"></textarea>
        </div>

        <div>
            <label class="block text-gray-700">Package</label>
            <select name="package" required class="w-full p-2 border rounded">
                <option value="MINI">MINI (RM0.60)</option>
                <option value="MEDIUM">MEDIUM (RM1.00)</option>
            </select>
        </div>

        <div>
            <label class="block text-gray-700">Qty</label>
            <input type="number" name="qty" min="1" required class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">Diskaun (RM)</label>
            <input type="number" name="discount" step="0.01" value="0" class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">Kos Transport (RM)</label>
            <input type="number" name="transport" step="0.01" value="0" class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-gray-700">Deposit (RM)</label>
            <input type="number" name="deposit" step="0.01" value="0" class="w-full p-2 border rounded">
        </div>

        <button type="submit" class="w-full bg-pink-500 text-white py-3 rounded-lg font-bold hover:bg-pink-600">
            Tambah Pesanan & Generate Resit
        </button>
    </form>

    <!-- Senarai pesanan terbaru -->
    <h2 class="text-xl font-semibold mt-8 mb-4 text-pink-600">Senarai Pesanan Terkini</h2>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border">
            <thead>
                <tr class="bg-gray-100">
                    <th class="py-2 px-4 border">Bil</th>
                    <th class="py-2 px-4 border">Nama</th>
                    <th class="py-2 px-4 border">Tarikh</th>
                    <th class="py-2 px-4 border">Jumlah</th>
                    <th class="py-2 px-4 border">Baki</th>
                </tr>
            </thead>
            <tbody>
                {% for row in pesanan_list %}
                <tr>
                    <td class="py-2 px-4 border">{{ row['bil_no'] }}</td>
                    <td class="py-2 px-4 border">{{ row['nama'] }}</td>
                    <td class="py-2 px-4 border">{{ row['tarikh'] }}</td>
                    <td class="py-2 px-4 border">RM{{ row['total_price']|round(2) }}</td>
                    <td class="py-2 px-4 border">RM{{ row['balance']|round(2) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}